---
title: 计算机网络-1
date: 2021-09-02 11:57:34
tags:
    - 网络系统
---

# 分层

- 物理
- 数据链路
- 网络
- 传输 - （会话，表示）
- 应用层
---

| 网络协议      | 层级         | 描述 |
| ------------- |:-------------:| -----:|
| **TCP**     | 传输层协议 | 面向连接，3次握手。面对二进制数据流传输 |
| **UDP**     | 传输层协议 | 非面向连接，不可靠，但是快速 |
| **Http**     | 应用层    |   无状态，面对数据包装，服务器响应request后就断掉|
| **Socket** |    |    针对 TCP 的具体接口实现提供传输层编程使用方法|
| **RPC**     |  | remote Procedure Call 远程过程调用，跨服务器调用方法 |

---

## 有HTTP为何要用rpc
> RPC跟HTTP不是对立面，RPC中可以使用HTTP作为通讯协议。RPC是一种设计、实现框架，通讯协议只是其中一部分。

> RPC的本质是提供了一种轻量无感知的跨进程通信的方式，远程调用的过程是透明的，你并不知道这个调用的方法是部署在哪里，通过PRC能够解耦服务）。RPC是根据语言的API来定义的，而不是基于网络的应用来定义的，调用更方便，协议私密更安全、内容更小效率更高

## 优势
>http接口是在接口不多、系统与系统交互较少的情况下，解决信息孤岛初期常使用的一种通信手段；优点就是简单、直接、开发方便。利用现成的http协议 进行传输。

但是如果是一个大型的网站，内部子系统较多、接口非常多的情况下，RPC框架的好处就显示出来了
1. 首先（基于TCP协议的情况下）就是长链接，不必每次通信都要像http 一样去3次握手什么的，减少了网络开销；
2. 其次就是RPC框架一般都有注册中心，有丰富的监控管理；发布、下线接口、动态扩展等，对调用方来说是无感知、统 一化的操作。
3. 第三个来说就是安全性。最后就是最近流行的服务化架构、服务化治理，RPC框架是一个强力的支撑。

## RPC 任务
- 通信建立 - TCP
- 寻址 - RPC需要服务器地址、端口，调用函数名称，建立方法到call id映射
- 序列化和反序列化， 调用过程是二进制，但是应用需要正常数据

## gRPC

google RPC，基于 HTTP/2

- 内容交换使用 protobuff 自动且快色的序列化 .proto 接口描述文件
- 传输协议 http2 性能好

## HTTP 2.0
- 原来 基于文本， 现在基于 二进制
- 现在 多request可共享连接
- 现在 header压缩
- 现在 服务器主动推送





